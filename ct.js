(function() {
/*! Made with ct.js http://ctjs.rocks/ */
const deadPool=[],copyTypeSymbol=Symbol("I am a ct.js copy");setInterval((function(){deadPool.length=0}),6e4);const ct={speed:60,types:{},snd:{},stack:[],fps:60,delta:1,deltaUi:1,camera:null,version:"1.5.1",meta:{name:"Jetty Cat",author:"Tchovi Govi",site:"https://play.google.com/store/apps/developer?id=Tchovi+Govi",version:"1.0.0"},main:{fpstick:0,pi:0},get width(){return ct.pixiApp.renderer.view.width},set width(t){return ct.camera.width=ct.roomWidth=t,ct.fittoscreen&&"fastScale"!==ct.fittoscreen.mode||ct.pixiApp.renderer.resize(t,ct.height),ct.fittoscreen&&ct.fittoscreen(),t},get height(){return ct.pixiApp.renderer.view.height},set height(t){return ct.camera.height=ct.roomHeight=t,ct.fittoscreen&&"fastScale"!==ct.fittoscreen.mode||ct.pixiApp.renderer.resize(ct.width,t),ct.fittoscreen&&ct.fittoscreen(),t},get viewWidth(){return ct.camera.width},get viewHeight(){return ct.camera.height}};console.log(`%c ðŸ˜º %c ct.js game editor %c v${ct.version} %c https://ctjs.rocks/ `,"background: #446adb; color: #fff; padding: 0.5em 0;","background: #5144db; color: #fff; padding: 0.5em 0;","background: #446adb; color: #fff; padding: 0.5em 0;","background: #5144db; color: #fff; padding: 0.5em 0;"),ct.highDensity=!0;const pixiAppSettings={width:1080,height:1920,antialias:!0,powerPreference:"high-performance",sharedTicker:!0,sharedLoader:!0};try{ct.pixiApp=new PIXI.Application(pixiAppSettings)}catch(t){console.error(t),console.warn("[ct.js] Something bad has just happened. This is usually due to hardware problems. I'll try to fix them now, but if the game still doesn't run, try including a legacy renderer in the project's settings."),PIXI.settings.SPRITE_MAX_TEXTURES=Math.min(PIXI.settings.SPRITE_MAX_TEXTURES,16),ct.pixiApp=new PIXI.Application(pixiAppSettings)}PIXI.settings.ROUND_PIXELS=!1,PIXI.Ticker.shared.maxFPS=60,ct.pixiApp.renderer.options.antialias||(PIXI.settings.SCALE_MODE=PIXI.SCALE_MODES.NEAREST),ct.stage=ct.pixiApp.stage,ct.pixiApp.renderer.autoDensity=ct.highDensity,document.getElementById("ct").appendChild(ct.pixiApp.view),ct.u={ldx:(t,e)=>t*Math.cos(e*Math.PI/-180),ldy:(t,e)=>t*Math.sin(e*Math.PI/-180),pdn:(t,e,s,i)=>(-180*Math.atan2(i-e,s-t)/Math.PI+360)%360,pdc:(t,e,s,i)=>Math.sqrt((s-t)*(s-t)+(i-e)*(i-e)),degToRad:t=>t*Math.PI/-180,radToDeg:t=>t/Math.PI*-180,rotate:(t,e,s)=>ct.u.rotateRad(t,e,ct.u.degToRad(s)),rotateRad(t,e,s){const i=Math.sin(s),o=Math.cos(s);return[o*t-i*e,o*e+i*t]},deltaDir(t,e){var s=(e=(e%360+360)%360)-(t=(t%360+360)%360);return s>180&&(s-=360),s<-180&&(s+=360),s},clamp:(t,e,s)=>Math.max(t,Math.min(s,e)),lerp:(t,e,s)=>t+(e-t)*s,unlerp:(t,e,s)=>(s-t)/(e-t),uiToGameCoord:(t,e)=>ct.camera.uiToGameCoord(t,e),gameToUiCoord:(t,e)=>ct.camera.gameToUiCoord(t,e),hexToPixi:t=>Number("0x"+t.slice(1)),pixiToHex:t=>"#"+t.toString(16).padStart(6,0),prect(t,e,s){var i,o,a,r;return s.splice?(i=Math.min(s[0],s[2]),o=Math.max(s[0],s[2]),a=Math.min(s[1],s[3]),r=Math.max(s[1],s[3])):(i=s.x-s.shape.left*s.scale.x,o=s.x+s.shape.right*s.scale.x,a=s.y-s.shape.top*s.scale.y,r=s.y+s.shape.bottom*s.scale.y),t>=i&&e>=a&&t<=o&&e<=r},pcircle:(t,e,s)=>s.splice?ct.u.pdc(t,e,s[0],s[1])<s[2]:ct.u.pdc(0,0,(s.x-t)/s.scale.x,(s.y-e)/s.scale.y)<s.shape.r,ext(t,e,s){if(s)for(const i in s)e[s[i]]&&(t[s[i]]=e[s[i]]);else for(const s in e)t[s]=e[s];return t},load(t,e){var s=document.createElement("script");s.src=t,e&&(s.onload=e),document.getElementsByTagName("head")[0].appendChild(s)},wait:t=>ct.timer.add(t),waitUi:t=>ct.timer.addUi(t)},ct.u.ext(ct.u,{lengthDirX:ct.u.ldx,lengthDirY:ct.u.ldy,pointDirection:ct.u.pdn,pointDistance:ct.u.pdc,pointRectangle:ct.u.prect,pointCircle:ct.u.pcircle,extend:ct.u.ext}),(()=>{const t=e=>{e.kill=!0,e.onDestroy&&(ct.types.onDestroy.apply(e),e.onDestroy.apply(e));for(const s of e.children)s[copyTypeSymbol]&&t(s);const s=ct.stack.indexOf(e);if(-1!==s&&ct.stack.splice(s,1),e.type){const t=ct.types.list[e.type].indexOf(e);-1!==t&&ct.types.list[e.type].splice(t,1)}deadPool.push(e)};ct.loop=function(e){ct.delta=e,ct.deltaUi=PIXI.Ticker.shared.elapsedMS/(1e3/(PIXI.Ticker.shared.maxFPS||60)),ct.inputs.updateActions(),ct.timer.updateTimers(),ct.place.debugTraceGraphics.clear();for(let t=0,e=ct.stack.length;t<e;t++)ct.types.beforeStep.apply(ct.stack[t]),ct.stack[t].onStep.apply(ct.stack[t]),ct.types.afterStep.apply(ct.stack[t]);for(const t of ct.stage.children)t instanceof Room&&(ct.rooms.beforeStep.apply(t),t.onStep.apply(t),ct.rooms.afterStep.apply(t));for(const e of ct.stack)e.kill&&!e._destroyed&&(t(e),e.destroy({children:!0}));for(const t of ct.stage.children)t.children.sort(((t,e)=>(t.depth||0)-(e.depth||0)||(t.uid||0)-(e.uid||0)||0));ct.camera&&(ct.camera.update(ct.delta),ct.camera.manageStage());for(let t=0,e=ct.stack.length;t<e;t++)ct.types.beforeDraw.apply(ct.stack[t]),ct.stack[t].onDraw.apply(ct.stack[t]),ct.types.afterDraw.apply(ct.stack[t]),ct.stack[t].xprev=ct.stack[t].x,ct.stack[t].yprev=ct.stack[t].y;for(const t of ct.stage.children)t instanceof Room&&(ct.rooms.beforeDraw.apply(t),t.onDraw.apply(t),ct.rooms.afterDraw.apply(t));ct.main.fpstick++,ct.rooms.switching&&ct.rooms.forceSwitch()}})();class CtAction{constructor(t){return this.name=t,this.methodCodes=[],this.methodMultipliers=[],this.prevValue=0,this.value=0,this}methodExists(t){return-1!==this.methodCodes.indexOf(t)}addMethod(t,e){if(-1!==this.methodCodes.indexOf(t))throw new Error(`[ct.inputs] An attempt to add an already added input "${t}" to an action "${name}".`);this.methodCodes.push(t),this.methodMultipliers.push(void 0!==e?e:1)}removeMethod(t){const e=this.methodCodes.indexOf(t);-1!==e&&(this.methodCodes.splice(e,1),this.methodMultipliers.splice(e,1))}setMultiplier(t,e){const s=this.methodCodes.indexOf(t);-1!==s?this.methodMultipliers[s]=e:(console.warning(`[ct.inputs] An attempt to change multiplier of a non-existent method "${t}" at event ${this.name}`),console.trace())}update(){this.prevValue=this.value,this.value=0;for(let t=0,e=this.methodCodes.length;t<e;t++){const e=ct.inputs.registry[this.methodCodes[t]]||0;this.value+=e*this.methodMultipliers[t]}this.value=Math.max(-1,Math.min(this.value,1))}reset(){this.prevValue=this.value=0}get pressed(){return 0===this.prevValue&&0!==this.value}get released(){return 0!==this.prevValue&&0===this.value}get down(){return 0!==this.value}}ct.actions={},ct.inputs={registry:{},addAction(t,e){if(t in ct.actions)throw new Error(`[ct.inputs] An action "${t}" already exists, can't add a new one with the same name.`);const s=new CtAction(t);for(const t of e)s.addMethod(t.code,t.multiplier);return ct.actions[t]=s,s},removeAction(t){delete ct.actions[t]},updateActions(){for(const t in ct.actions)ct.actions[t].update()}},ct.inputs.addAction("Poof",[{code:"touch.Any"}]),function(ct){const t=0*Math.PI;var e=function(e){const{shape:s}=e,i=new SSCD.Vector(e.x,e.y);if("rect"===s.type){if(0===e.rotation)return i.x-=e.scale.x>0?s.left*e.scale.x:-e.scale.x*s.right,i.y-=e.scale.y>0?s.top*e.scale.y:-s.bottom*e.scale.y,new SSCD.Rectangle(i,new SSCD.Vector(Math.abs((s.left+s.right)*e.scale.x),Math.abs((s.bottom+s.top)*e.scale.y)));const t=ct.u.rotate(-s.left*e.scale.x,-s.top*e.scale.y,e.rotation),o=ct.u.rotate(-s.left*e.scale.x,s.bottom*e.scale.y,e.rotation),a=ct.u.rotate(s.right*e.scale.x,s.bottom*e.scale.y,e.rotation),r=ct.u.rotate(s.right*e.scale.x,-s.top*e.scale.y,e.rotation);return new SSCD.LineStrip(i,[new SSCD.Vector(t[0],t[1]),new SSCD.Vector(o[0],o[1]),new SSCD.Vector(a[0],a[1]),new SSCD.Vector(r[0],r[1])],!0)}if("circle"===s.type){if(Math.abs(e.scale.x)===Math.abs(e.scale.y))return new SSCD.Circle(i,s.r*Math.abs(e.scale.x));const o=[];for(let i=0;i<16;i++){const a=[Math.sin(t/16*i)*s.r*e.scale.x,Math.cos(t/16*i)*s.r*e.scale.y];0!==e.rotation?o.push(ct.u.rotate(a[0],a[1],e.rotation)):o.push(a)}return new SSCD.LineStrip(i,o,!0)}if("strip"===s.type){const t=[];if(0!==e.rotation)for(const i of s.points){const[s,o]=ct.u.rotate(i.x*e.scale.x,i.y*e.scale.y,e.rotation);t.push(new SSCD.Vector(s,o))}else for(const i of s.points)t.push(new SSCD.Vector(i.x*e.scale.x,i.y*e.scale.y));return new SSCD.LineStrip(i,t,Boolean(s.closedStrip))}return"line"===s.type?new SSCD.Line(new SSCD.Vector(e.x+s.x1*e.scale.x,e.y+s.y1*e.scale.y),new SSCD.Vector((s.x2-s.x1)*e.scale.x,(s.y2-s.y1)*e.scale.y)):new SSCD.Circle(i,0)};ct.place={m:1,gridX:1200,gridY:1200,grid:{},tileGrid:{},getHashes(t){var e=[],s=Math.round(t.x/ct.place.gridX),i=Math.round(t.y/ct.place.gridY),o=Math.sign(t.x-ct.place.gridX*s),a=Math.sign(t.y-ct.place.gridY*i);return e.push(`${s}:${i}`),o&&(e.push(`${s+o}:${i}`),a&&e.push(`${s+o}:${i+a}`)),a&&e.push(`${s}:${i+a}`),e},drawDebugGraphic(t){const s=this._shape||e(this),i=this.$cDebugCollision;let o=this instanceof Copy?26367:65535;if(this.$cHadCollision&&(o=65280),i.lineStyle(2,o),s instanceof SSCD.Rectangle){const e=s.get_position(),a=s.get_size();i.beginFill(o,.1),t?i.drawRect(e.x,e.y,a.x,a.y):i.drawRect(e.x-this.x,e.y-this.y,a.x,a.y),i.endFill()}else if(s instanceof SSCD.LineStrip)if(t){i.moveTo(s.__points[0].x+this.x,s.__points[0].y+this.y);for(let t=1;t<s.__points.length;t++)i.lineTo(s.__points[t].x+this.x,s.__points[t].y+this.y)}else{i.moveTo(s.__points[0].x,s.__points[0].y);for(let t=1;t<s.__points.length;t++)i.lineTo(s.__points[t].x,s.__points[t].y)}else if(s instanceof SSCD.Circle&&s.get_radius()>0)i.beginFill(o,.1),t?i.drawCircle(this.x,this.y,s.get_radius()):i.drawCircle(0,0,s.get_radius()),i.endFill();else if(s instanceof SSCD.Line)if(t){const t=s.get_p1(),e=s.get_p2();i.moveTo(t.x,t.y).lineTo(e.x,e.y)}else i.moveTo(s.__position.x,s.__position.y).lineTo(s.__position.x+s.__dest.x,s.__position.y+s.__dest.y);else t?i.moveTo(-16+this.x,-16+this.y).lineTo(16+this.x,16+this.y).moveTo(-16+this.x,16+this.y).lineTo(16+this.x,-16+this.y):i.moveTo(-16,-16).lineTo(16,16).moveTo(-16,16).lineTo(16,-16)},drawDebugTileGraphic(t){const e=10053375;this.$cDebugCollision.lineStyle(2,e).beginFill(e,.1).drawRect(t.x-this.x,t.y-this.y,t.width,t.height).endFill()},collide(t,s){if(t._shape=t._shape||e(t),s._shape=s._shape||e(s),"complex"===t._shape.__type||"strip"===s._shape.__type||"complex"===s._shape.__type||"strip"===s._shape.__type){const e=t._shape.get_aabb(),i=s._shape.get_aabb();if(!e.intersects(i))return!1}return!!SSCD.CollisionManager.test_collision(t._shape,s._shape)},occupied(t,s,i,o,a){var r=t.x,n=t.y,c=t._shape;let h;var l;"number"==typeof i?(t.x=s,t.y=i):(o=s,a=i,s=t.x,i=t.y),"boolean"==typeof o&&(a=o),r!==t.x||n!==t.y?(t._shape=e(t),h=ct.place.getHashes(t)):h=t.$chashes||ct.place.getHashes(t),a&&(l=[]);for(const e of h){const s=ct.place.grid[e];if(s)for(let e=0,i=s.length;e<i;e++)if(s[e]!==t&&(!o||s[e].$ctype===o)&&ct.place.collide(t,s[e])){if(!a)return r===t.x&&n===t.y||(t.x=r,t.y=n,t._shape=c),s[e];l.includes(s[e])||l.push(s[e])}}return r===t.x&&n===t.y||(t.x=r,t.y=n,t._shape=c),!!a&&l},free:(t,e,s,i)=>!ct.place.occupied(t,e,s,i),meet(t,s,i,o,a){var r=t.x,n=t.y,c=t._shape;let h;var l;"number"==typeof i?(t.x=s,t.y=i):(o=s,a=i,s=t.x,i=t.y),"boolean"==typeof o&&(a=o),r!==t.x||n!==t.y?(t._shape=e(t),h=ct.place.getHashes(t)):h=t.$chashes||ct.place.getHashes(t),a&&(l=[]);for(const e of h){const s=ct.place.grid[e];if(s)for(let e=0,i=s.length;e<i;e++)if(s[e].type===o&&s[e]!==t&&ct.place.collide(t,s[e])){if(!a)return r===t.x&&n===t.y||(t._shape=c,t.x=r,t.y=n),s[e];l.push(s[e])}}return r===t.x&&n===t.y||(t.x=r,t.y=n,t._shape=c),!!a&&l},tile(t,s,i,o){if(!t.shape||!t.shape.type)return!1;var a=t.x,r=t.y,n=t._shape;let c;void 0!==i?(t.x=s,t.y=i):(o=s,s=t.x,i=t.y),a!==t.x||r!==t.y?(t._shape=e(t),c=ct.place.getHashes(t)):c=t.$chashes||ct.place.getHashes(t);for(const e of c){const s=ct.place.tileGrid[e];if(s)for(let e=0,i=s.length;e<i;e++){const i=s[e],c="string"==typeof o?i.ctype===o:i.depth===o;if((!o||c)&&ct.place.collide(i,t))return a===t.x&&r===t.y||(t.x=a,t.y=r,t._shape=n),!0}}return a===t.x&&r===t.y||(t.x=a,t.y=r,t._shape=n),!1},lastdist:null,nearest(t,e,s){if(ct.types.list[s].length>0){var i=Math.hypot(t-ct.types.list[s][0].x,e-ct.types.list[s][0].y),o=ct.types.list[s][0];for(const a of ct.types.list[s])Math.hypot(t-a.x,e-a.y)<i&&(i=Math.hypot(t-a.x,e-a.y),o=a);return ct.place.lastdist=i,o}return!1},furthest(t,e,s){if(ct.types.list[s].length>0){var i=Math.hypot(t-ct.types.list[s][0].x,e-ct.types.list[s][0].y),o=ct.types.list[s][0];for(const a of ct.types.list[s])Math.hypot(t-a.x,e-a.y)>i&&(i=Math.hypot(t-a.x,e-a.y),o=a);return ct.place.lastdist=i,o}return!1},enableTilemapCollisions(t,e){const s=e||t.ctype;if(t.addedCollisions)throw new Error("[ct.place] The tilemap already has collisions enabled.");for(let e=0,i=t.tiles.length;e<i;e++){const i=t.tiles[e];i._shape=new SSCD.Rectangle(new SSCD.Vector(i.x,i.y),new SSCD.Vector(i.width,i.height)),i.ctype=s,i.$chashes=ct.place.getHashes(i);for(const t of i.$chashes)t in ct.place.tileGrid?ct.place.tileGrid[t].push(i):ct.place.tileGrid[t]=[i];i.depth=t.depth}t.addedCollisions=!0},moveAlong(t,e,s,i,o){"number"==typeof i&&(o=i,i=void 0),o=Math.abs(o||1),s<0&&(s*=-1,e+=180);var a=Math.cos(e*Math.PI/-180)*o,r=Math.sin(e*Math.PI/-180)*o;for(let e=0;e<s;e+=o){const e=ct.place.occupied(t,t.x+a,t.y+r,i)||ct.place.tile(t,t.x+a,t.y+r,i);if(e)return e;t.x+=a,t.y+=r,delete t._shape}return!1},moveByAxes(t,e,s,i,o){"number"==typeof i&&(o=i,i=void 0);const a={x:!1,y:!1};for(o=Math.abs(o||1);Math.abs(e)>o;){const s=ct.place.occupied(t,t.x+Math.sign(e)*o,t.y,i)||ct.place.tile(t,t.x+Math.sign(e)*o,t.y,i);if(s){a.x=s;break}t.x+=Math.sign(e)*o,e-=Math.sign(e)*o}for(;Math.abs(s)>o;){const e=ct.place.occupied(t,t.x,t.y+Math.sign(s)*o,i)||ct.place.tile(t,t.x,t.y+Math.sign(s)*o,i);if(e){a.y=e;break}t.y+=Math.sign(s)*o,s-=Math.sign(s)*o}return Math.abs(e)<o&&ct.place.free(t,t.x+e,t.y,i)&&!ct.place.tile(t,t.x+e,t.y,i)&&(t.x+=e),Math.abs(s)<o&&ct.place.free(t,t.x,t.y+s,i)&&!ct.place.tile(t,t.x,t.y+s,i)&&(t.y+=s),!(!a.x&&!a.y)&&a},go(t,e,s,i,o){if(ct.u.pdc(t.x,t.y,e,s)<i)return void(ct.place.free(t,e,s,o)&&(t.x=e,t.y=s,delete t._shape));var a=ct.u.pdn(t.x,t.y,e,s);let r=t.x+ct.u.ldx(i,a),n=t.y+ct.u.ldy(i,a);if(ct.place.free(t,r,n,o))t.x=r,t.y=n,delete t._shape,t.dir=a;else for(var c=-1;c<=1;c+=2)for(var h=30;h<150;h+=30)if(r=t.x+ct.u.ldx(i,a+h*ct.place.m*c),n=t.y+ct.u.ldy(i,a+h*ct.place.m*c),ct.place.free(t,r,n,o))return t.x=r,t.y=n,delete t._shape,void(t.dir=a+h*ct.place.m*c)},traceCustom(t,e,s,i){const o=[];if(!e)return ct.place.occupied(t,s,i);for(var a in ct.stack)if((!s||ct.stack[a].ctype===s)&&ct.place.collide(t,ct.stack[a])){if(!i)return ct.stack[a];o.push(ct.stack[a])}return o},traceLine(t,e,s){let i=!1;(Math.abs(t.x1-t.x2)>ct.place.gridX||Math.abs(t.y1-t.y2)>ct.place.gridY)&&(i=!0);const o={x:t.x1,y:t.y1,scale:{x:1,y:1},rotation:0,shape:{type:"line",x1:0,y1:0,x2:t.x2-t.x1,y2:t.y2-t.y1}},a=ct.place.traceCustom(o,i,e,s);return s&&a.sort((function(e,s){return ct.u.pdc(t.x1,t.y1,e.x,e.y)-ct.u.pdc(t.x1,t.y1,s.x,s.y)})),a},traceRect(t,e,s){let i=!1;"x1"in(t={...t})&&(t.x=t.x1,t.y=t.y1,t.width=t.x2-t.x1,t.height=t.y2-t.y1),(Math.abs(t.width)>ct.place.gridX||Math.abs(t.height)>ct.place.gridY)&&(i=!0);const o={x:t.x,y:t.y,scale:{x:1,y:1},rotation:0,shape:{type:"rect",left:0,top:0,right:t.width,bottom:t.height}};return ct.place.traceCustom(o,i,e,s)},traceCircle(t,e,s){let i=!1;(2*t.radius>ct.place.gridX||2*t.radius>ct.place.gridY)&&(i=!0);const o={x:t.x,y:t.y,scale:{x:1,y:1},rotation:0,shape:{type:"circle",r:t.radius}};return ct.place.traceCustom(o,i,e,s)},tracePolyline(t,e,s){const i={x:0,y:0,scale:{x:1,y:1},rotation:0,shape:{type:"strip",points:t}};return ct.place.traceCustom(i,!0,e,s)},tracePoint(t,e,s){const i={x:t.x,y:t.y,scale:{x:1,y:1},rotation:0,shape:{type:"point"}};return ct.place.traceCustom(i,!1,e,s)},trace:(t,e,s,i,o)=>ct.place.traceLine({x1:t,y1:e,x2:s,y2:i},o,!0)},ct.place.traceRectange=ct.place.traceRect,setInterval((function(){ct.place.m*=-1}),789)}(ct),function(ct){document.body.style.overflow="hidden";var t=ct.pixiApp.view,e=function(){const{mode:e}=ct.fittoscreen,s=ct.highDensity&&window.devicePixelRatio||1,i=window.innerWidth/ct.roomWidth,o=window.innerHeight/ct.roomHeight;let a=Math.min(i,o);var r,n,c,h;"fastScaleInteger"===e&&(a=a<1?a:Math.floor(a)),"expandViewport"===e||"expand"===e?(r=Math.ceil(window.innerWidth*s),n=Math.ceil(window.innerHeight*s),c=window.innerWidth,h=window.innerHeight):"fastScale"===e||"fastScaleInteger"===e?(r=Math.ceil(ct.roomWidth*s),n=Math.ceil(ct.roomHeight*s),c=ct.roomWidth,h=ct.roomHeight):"scaleFit"!==e&&"scaleFill"!==e||("scaleFill"===e?(r=Math.ceil(ct.roomWidth*i*s),n=Math.ceil(ct.roomHeight*o*s),c=window.innerWidth/a,h=window.innerHeight/a):(r=Math.ceil(ct.roomWidth*a*s),n=Math.ceil(ct.roomHeight*a*s),c=ct.roomWidth,h=ct.roomHeight)),ct.pixiApp.renderer.resize(r,n),ct.pixiApp.stage.scale.x=ct.pixiApp.stage.scale.y="scaleFill"!==e&&"scaleFit"!==e?s:s*a,t.style.width=Math.ceil(r/s)+"px",t.style.height=Math.ceil(n/s)+"px",ct.camera.width=c,ct.camera.height=h,"fastScale"===e||"fastScaleInteger"===e?(t.style.transform=`translate(-50%, -50%) scale(${a})`,t.style.position="absolute",t.style.top="50%",t.style.left="50%"):"expandViewport"===e||"expand"===e||"scaleFill"===e?(t.style.position="static",t.style.top="unset",t.style.left="unset"):"scaleFit"===e&&(t.style.transform="translate(-50%, -50%)",t.style.position="absolute",t.style.top="50%",t.style.left="50%")},s=function t(){!function(){try{const t=require("electron").remote.BrowserWindow.getFocusedWindow();return void t.setFullScreen(!t.isFullScreen())}catch(t){}var t=document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement,e=document.getElementById("ct"),s=e.requestFullscreen||e.webkitRequestFullscreen||e.mozRequestFullScreen||e.msRequestFullscreen,i=document.exitFullscreen||document.webkitExitFullscreen||document.mozCancelFullScreen||document.msExitFullscreen;if(t)i&&i.call(document);else{var o=s.call(e);o&&o.catch((function(t){console.error("[ct.fittoscreen]",t)}))}}(),document.removeEventListener("mouseup",t),document.removeEventListener("keyup",t),document.removeEventListener("click",t)};window.addEventListener("resize",e),ct.fittoscreen=e,ct.fittoscreen.toggleFullscreen=function(){document.addEventListener("mouseup",s),document.addEventListener("keyup",s),document.addEventListener("click",s)};var i="scaleFit";Object.defineProperty(ct.fittoscreen,"mode",{configurable:!1,enumerable:!0,set(t){i=t},get:()=>i}),ct.fittoscreen.mode=i,ct.fittoscreen.getIsFullscreen=function(){try{return require("electron").remote.BrowserWindow.getFocusedWindow.isFullScreen}catch(t){}return document.fullscreen||document.webkitIsFullScreen||document.mozFullScreen}}(ct),function(){ct.sound={},ct.sound.howler=Howler,Howler.orientation(0,-1,0,0,0,1),Howler.pos(0,0,0),ct.sound.howl=Howl;var t=[][0]||2500;ct.sound.useDepth=!1,ct.sound.manageListenerPosition=!1,ct.sound.detect=Howler.codecs,ct.sound.init=function(t,e,s){s=s||{};var i=[];e.wav&&".wav"===e.wav.slice(-4)&&i.push(e.wav),e.mp3&&".mp3"===e.mp3.slice(-4)&&i.push(e.mp3),e.ogg&&".ogg"===e.ogg.slice(-4)&&i.push(e.ogg);var o=new Howl({src:i,autoplay:!1,preload:!s.music,html5:Boolean(s.music),loop:s.loop,pool:s.poolSize||5,onload:function(){s.music||ct.res.soundsLoaded++},onloaderror:function(){ct.res.soundsError++,o.buggy=!0,console.error("[ct.sound.howler] Oh no! We couldn't load "+(e.wav||e.mp3||e.ogg)+"!")}});s.music&&ct.res.soundsLoaded++,ct.res.sounds[t]=o};ct.sound.spawn=function(e,s,i){"function"==typeof(s=s||{})&&(i=s,s={});var o=ct.res.sounds[e],a=o.play();if(s.loop&&o.loop(!0,a),void 0!==s.volume&&o.volume(s.volume,a),void 0!==s.rate&&o.rate(s.rate,a),void 0!==s.x||s.position){if(void 0!==s.x)o.pos(s.x,s.y||0,s.z||0,a);else{const t=s.position;o.pos(t.x,t.y,s.z||(ct.sound.useDepth?t.depth:0),a)}((e,s,i)=>{e.pannerAttr({coneInnerAngle:s.coneInnerAngle||360,coneOuterAngle:s.coneOuterAngle||360,coneOuterGain:s.coneOuterGain||1,distanceModel:s.distanceModel||"linear",maxDistance:s.maxDistance||t,refDistance:s.refDistance||1,rolloffFactor:s.rolloffFactor||1,panningModel:s.panningModel||"HRTF"},i)})(o,s,a)}return i&&o.once("end",i,a),a},ct.sound.stop=function(t,e){ct.sound.playing(t,e)&&ct.res.sounds[t].stop(e)},ct.sound.pause=function(t,e){ct.res.sounds[t].pause(e)},ct.sound.resume=function(t,e){ct.res.sounds[t].play(e)},ct.sound.playing=function(t,e){return ct.res.sounds[t].playing(e)},ct.sound.load=function(t){ct.res.sounds[t].load()},ct.sound.volume=function(t,e,s){return ct.res.sounds[t].volume(e,s)},ct.sound.fade=function(t,e,s,i){if(ct.sound.playing(t,i)){var o=ct.res.sounds[t],a=i?o.volume(i):o.volume;try{o.fade(a,e,s,i)}catch(s){console.warn("Could not reliably fade a sound, reason:",s),ct.sound.volume(t,e,i)}}},ct.sound.moveListener=function(t,e,s){Howler.pos(t,e,s||0)},ct.sound.position=function(t,e,s,i,o){if(ct.sound.playing(t,e)){var a=ct.res.sounds[t],r=a.pos(e);a.pos(s,i,o||r[2],e)}},ct.sound.globalVolume=Howler.volume.bind(Howler),ct.sound.exists=function(t){return t in ct.res.sounds}}(),function(ct){var t=function(t,e){ct.inputs.registry["touch."+t]=e},e=0,s=0,i=0,o=0,a=0,r=()=>{t("Any",ct.touch.events.length>0?1:0),t("Double",ct.touch.events.length>1?1:0),t("Triple",ct.touch.events.length>2?1:0)},n=t=>{const e=ct.pixiApp.view.getBoundingClientRect(),s=(t.clientX-e.left)/e.width*ct.camera.width,i=(t.clientY-e.top)/e.height*ct.camera.height,o=ct.u.uiToGameCoord(s,i);return{id:t.identifier,x:o[0],y:o[1],xui:s,yui:i,xprev:o[0],yprev:o[1],xuiprev:s,yuiprev:i,r:t.radiusX?Math.max(t.radiusX,t.radiusY):0}},c=t=>{for(let e=0;e<ct.touch.events.length;e++)if(ct.touch.events[e].id===t)return ct.touch.events[e];return!1},h=t=>{for(let e=0;e<ct.touch.events.length;e++)if(ct.touch.events[e].id===t)return e;return-1},l=function(t){t.preventDefault();for(let s=0,i=t.changedTouches.length;s<i;s++){var e=n(t.changedTouches[s]);ct.touch.events.push(e),ct.touch.x=e.x,ct.touch.y=e.y,ct.touch.xui=e.xui,ct.touch.yui=e.yui}r()},d=function(t){t.preventDefault();for(let e=0,s=t.changedTouches.length;e<s;e++){const s=t.changedTouches[e],i=c(t.changedTouches[e].identifier);if(i){const t=ct.pixiApp.view.getBoundingClientRect();i.xui=(s.clientX-t.left)/t.width*ct.camera.width,i.yui=(s.clientY-t.top)/t.height*ct.camera.height,[i.x,i.y]=ct.u.uiToGameCoord(i.xui,i.yui),i.r=s.radiusX?Math.max(s.radiusX,s.radiusY):0,ct.touch.x=i.x,ct.touch.y=i.y,ct.touch.xui=i.xui,ct.touch.yui=i.yui}}},p=function(t){t.preventDefault();var e=t.changedTouches;for(let t=0;t<e.length;t++){const s=h(e[t].identifier);-1!==s&&ct.touch.released.push(ct.touch.events.splice(s,1)[0])}r()},u=function(t){const e=ct.pixiApp.view.getBoundingClientRect();var s={id:-1,xui:(t.clientX-e.left)*ct.camera.width/e.width,yui:(t.clientY-e.top)*ct.camera.height/e.height,r:0};[s.x,s.y]=ct.u.uiToGameCoord(s.xui,s.yui),ct.touch.events.push(s),ct.touch.x=s.x,ct.touch.y=s.y,ct.touch.xui=s.xui,ct.touch.yui=s.yui,r()},m=function(t){const e=ct.pixiApp.view.getBoundingClientRect(),s=c(-1);s&&(s.xui=(t.clientX-e.left)*ct.camera.width/e.width,s.yui=(t.clientY-e.top)*ct.camera.height/e.height,[s.x,s.y]=ct.u.uiToGameCoord(s.xui,s.yui),ct.touch.x=s.x,ct.touch.y=s.y,ct.touch.xui=s.xui,ct.touch.yui=s.yui)},y=function(){var t=h(-1);-1!==t&&ct.touch.events.splice(t,1),r()};ct.touch={released:[],setupListeners(){document.addEventListener("touchstart",l,!1),document.addEventListener("touchstart",(()=>{ct.touch.enabled=!0}),{once:!0}),document.addEventListener("touchend",p,!1),document.addEventListener("touchcancel",p,!1),document.addEventListener("touchmove",d,!1)},setupMouseListeners(){document.addEventListener("mousemove",m,!1),document.addEventListener("mouseup",y,!1),document.addEventListener("mousedown",u,!1)},enabled:!1,events:[],x:0,y:0,xprev:0,yprev:0,xui:0,yui:0,xuiprev:0,yuiprev:0,clear(){ct.touch.events.length=0,ct.touch.clearReleased(),r()},clearReleased(){ct.touch.released.length=0},collide(t,e,s){var i=s?ct.touch.released:ct.touch.events;if(void 0!==e&&!1!==e){const s=h(e);return-1!==s&&ct.place.collide(t,{x:i[s].x,y:i[s].y,shape:{type:i[s].r?"circle":"point",r:i[s].r},scale:{x:1,y:1}})}for(let e=0,s=i.length;e<s;e++)if(ct.place.collide(t,{x:i[e].x,y:i[e].y,shape:{type:i[e].r?"circle":"point",r:i[e].r},scale:{x:1,y:1}}))return!0;return!1},collideUi(t,e,s){var i=s?ct.touch.released:ct.touch.events;if(void 0!==e&&!1!==e){const s=h(e);return-1!==s&&ct.place.collide(t,{x:i[s].xui,y:i[s].yui,shape:{type:i[s].r?"circle":"point",r:i[s].r},scale:{x:1,y:1}})}for(let e=0,s=i.length;e<s;e++)if(ct.place.collide(t,{x:i[e].xui,y:i[e].yui,shape:{type:i[e].r?"circle":"point",r:i[e].r},scale:{x:1,y:1}}))return!0;return!1},hovers:(t,e,s)=>ct.mouse&&ct.mouse.hovers(t)||ct.touch.collide(t,e,s),hoversUi:(t,e,s)=>ct.mouse&&ct.mouse.hoversUi(t)||ct.touch.collideUi(t,e,s),getById:c,updateGestures:function(){let r=0,n=0;const c=ct.pixiApp.view.getBoundingClientRect();for(const t of ct.touch.events)r+=(t.clientX-c.left)/c.width,n+=(t.clientY-c.top)/c.height;r/=ct.touch.events.length,n/=ct.touch.events.length;let h=0,l=o;if(ct.touch.events.length>1){const t=[ct.touch.events[0],ct.touch.events[1]].sort(((t,e)=>t.id-e.id));h=ct.u.pdn(t[0].x,t[0].y,t[1].x,t[1].y),l=ct.u.pdc(t[0].x,t[0].y,t[1].x,t[1].y)}e===ct.touch.events.length?(ct.touch.events.length>1?(t("DeltaRotation",ct.u.degToRad(ct.u.deltaDir(a,h))),t("DeltaPinch",l/o-1)):(t("DeltaPinch",0),t("DeltaRotation",0)),ct.touch.events.length?(t("PanX",r-s),t("PanY",n-i)):(t("PanX",0),t("PanY",0))):(e=ct.touch.events.length,t("DeltaPinch",0),t("DeltaRotation",0),t("PanX",0),t("PanY",0)),s=r,i=n,a=h,o=l}}}(ct),ct.tween={add(t){var e={obj:t.obj,fields:t.fields||{},curve:t.curve||ct.tween.ease,duration:t.duration||1e3,timer:new CtTimer(this.duration,!1,t.useUiDelta||!1)},s=new Promise(((t,s)=>{for(var i in e.resolve=t,e.reject=s,e.starting={},e.fields)e.starting[i]=e.obj[i]||0;ct.tween.tweens.push(e)}));return t.silent&&(s.catch((()=>{})),e.timer.catch((()=>{}))),s.stop=function(){e.reject({code:0,info:"Stopped by game logic",from:"ct.tween"})},s},linear:(t,e,s)=>e*s+t,ease:(t,e,s)=>(s*=2)<1?e/2*s*s+t:-e/2*(--s*(s-2)-1)+t,easeInQuad:(t,e,s)=>e*s*s+t,easeOutQuad:(t,e,s)=>-e*s*(s-2)+t,easeInCubic:(t,e,s)=>e*s*s*s+t,easeOutCubic:(t,e,s)=>e*(--s*s*s+1)+t,easeInOutCubic:(t,e,s)=>(s*=2)<1?e/2*s*s*s+t:e/2*((s-=2)*s*s+2)+t,easeInOutQuart:(t,e,s)=>(s*=2)<1?e/2*s*s*s*s+t:-e/2*((s-=2)*s*s*s-2)+t,easeInQuart:(t,e,s)=>e*s*s*s*s+t,easeOutQuart:(t,e,s)=>-e*(--s*s*s*s-1)+t,easeInCirc:(t,e,s)=>-e*(Math.sqrt(1-s*s)-1)+t,easeOutCirc:(t,e,s)=>(s--,e*Math.sqrt(1-s*s)+t),easeInOutCirc:(t,e,s)=>(s*=2)<1?-e/2*(Math.sqrt(1-s*s)-1)+t:(s-=2,e/2*(Math.sqrt(1-s*s)+1)+t),easeInBack(t,e,s){const i=1.70158;return e*(2.70158*s*s*s-i*s*s)+t},easeOutBack(t,e,s){const i=1.70158;return e*(1+2.70158*(s-1)**3+i*(s-1)**2)+t},easeInOutBack(t,e,s){const i=2.5949095;return e*(s<.5?(2*s)**2*(7.189819*s-i)/2:((2*s-2)**2*((i+1)*(2*s-2)+i)+2)/2)+t},easeInElastic(t,e,s){const i=2*Math.PI/3;return e*(0===s?0:1===s?1:-(2**(10*s-10))*Math.sin((10*s-10.75)*i))+t},easeOutElastic(t,e,s){const i=2*Math.PI/3;return e*(0===s?0:1===s?1:2**(-10*s)*Math.sin((10*s-.75)*i)+1)+t},easeInOutElastic(t,e,s){const i=2*Math.PI/4.5;return e*(0===s?0:1===s?1:s<.5?-(2**(20*s-10))*Math.sin((20*s-11.125)*i)/2:2**(-20*s+10)*Math.sin((20*s-11.125)*i)/2+1)+t},easeOutBounce(t,e,s){const i=7.5625,o=2.75;return e*(s<1/o?i*s*s:s<2/o?i*(s-=1.5/o)*s+.75:s<2.5/o?i*(s-=2.25/o)*s+.9375:i*(s-=2.625/o)*s+.984375)+t},easeInBounce(t,e,s){const i=7.5625,o=2.75;return e*(1-((s=1-s)<1/o?i*s*s:s<2/o?i*(s-=1.5/o)*s+.75:s<2.5/o?i*(s-=2.25/o)*s+.9375:i*(s-=2.625/o)*s+.984375))+t},easeInOutBounce(t,e,s){const i=7.5625,o=2.75;var a;return(a=s<.5?1-2*s:2*s-1)<1/o?i*a*a:a<2/o?i*(a-=1.5/o)*a+.75:a<2.5/o?i*(a-=2.25/o)*a+.9375:i*(a-=2.625/o)*a+.984375,e*(s<.5?(1-a)/1:(1+a)/1)+t},tweens:[],wait:ct.u.wait},ct.tween.easeInOutQuad=ct.tween.ease,function(){const t=function(t,e){ct.rooms.templates.CTTRANSITIONEMPTYROOM.width=ct.camera.width,ct.rooms.templates.CTTRANSITIONEMPTYROOM.height=ct.camera.height;const s=ct.rooms.append("CTTRANSITIONEMPTYROOM",{isUi:!0});return ct.types.copy(t,0,0,Object.assign({room:s},e),s).promise};ct.transition={fadeOut:(e,s)=>t("CTTRANSITION_FADE",{duration:e=e||500,color:s=s||0,in:!1}),fadeIn:(e,s)=>t("CTTRANSITION_FADE",{duration:e=e||500,color:s=s||0,in:!0}),scaleOut:(e,s,i)=>t("CTTRANSITION_SCALE",{duration:e=e||500,color:i=i||0,scaling:s=s||.1,in:!1}),scaleIn:(e,s,i)=>t("CTTRANSITION_SCALE",{duration:e=e||500,color:i=i||0,scaling:s=s||.1,in:!0}),slideOut:(e,s,i)=>t("CTTRANSITION_SLIDE",{duration:e=e||500,color:i=i||0,endAt:s=s||"right",in:!1}),slideIn:(e,s,i)=>t("CTTRANSITION_SLIDE",{duration:e=e||500,color:i=i||0,endAt:s=s||"right",in:!0}),circleOut:(e,s)=>t("CTTRANSITION_CIRCLE",{duration:e,color:s=s||0,in:!0}),circleIn:(e,s)=>t("CTTRANSITION_CIRCLE",{duration:e,color:s=s||0,in:!1})}}(),ct.random=function(t){return Math.random()*t},ct.u.ext(ct.random,{dice:(...t)=>t[Math.floor(Math.random()*t.length)],range:(t,e)=>t+Math.random()*(e-t),deg:()=>360*Math.random(),coord:()=>[Math.floor(Math.random()*ct.width),Math.floor(Math.random()*ct.height)],chance:(t,e)=>e?Math.random()*e<t:100*Math.random()<t,from:t=>t[Math.floor(Math.random()*t.length)],createSeededRandomizer:t=>function(){var e=t+=1831565813;return e=Math.imul(e^e>>>15,1|e),(((e^=e+Math.imul(e^e>>>7,61|e))^e>>>14)>>>0)/4294967296}});{const t={};t.currentRootRandomizer=ct.random.createSeededRandomizer(456852),ct.random.seeded=function(){return t.currentRootRandomizer()},ct.random.setSeed=function(e){t.currentRootRandomizer=ct.random.createSeededRandomizer(e)},ct.random.setSeed(9323846264)}class Room extends PIXI.Container{static getNewId(){return this.roomId++,this.roomId}constructor(t){if(super(),this.x=this.y=0,this.uid=Room.getNewId(),this.tileLayers=[],this.backgrounds=[],ct.room||(ct.room=ct.rooms.current=this),t){t.extends&&ct.u.ext(this,t.extends),this.onCreate=t.onCreate,this.onStep=t.onStep,this.onDraw=t.onDraw,this.onLeave=t.onLeave,this.template=t,this.name=t.name,this===ct.room&&(ct.pixiApp.renderer.backgroundColor=ct.u.hexToPixi(this.template.backgroundColor)),ct.fittoscreen();for(let e=0,s=t.bgs.length;e<s;e++){const s=new ct.types.Background(t.bgs[e].texture,null,t.bgs[e].depth,t.bgs[e].extends);this.addChild(s)}for(let e=0,s=t.tiles.length;e<s;e++){const s=new Tilemap(t.tiles[e]);s.cache(),this.tileLayers.push(s),this.addChild(s)}for(let e=0,s=t.objects.length;e<s;e++){const s=t.objects[e].exts||{};ct.types.make(t.objects[e].type,t.objects[e].x,t.objects[e].y,{tx:t.objects[e].tx,ty:t.objects[e].ty,tr:t.objects[e].tr,...s},this)}}return this}get x(){return-this.position.x}set x(t){return this.position.x=-t,t}get y(){return-this.position.y}set y(t){return this.position.y=-t,t}}Room.roomId=0,function(){var t;ct.rooms={templates:{},list:{},addBg(t,e){const s=new ct.types.Background(t,null,e);return ct.room.addChild(s),s},addTileLayer:t=>ct.tilemaps.create(t),clear(){ct.stage.children=[],ct.stack=[];for(const t in ct.types.list)ct.types.list[t]=[];for(const t in ct.backgrounds.list)ct.backgrounds.list[t]=[];ct.rooms.list={};for(const t in ct.rooms.templates)ct.rooms.list[t]=[]},remove(t){if(!(t instanceof Room)){if("string"==typeof t)throw new Error("[ct.rooms] To remove a room, you should provide a reference to it (to an object), not its name. Provided value:",t);throw new Error("[ct.rooms] An attempt to remove a room that is not actually a room! Provided value:",t)}const e=ct.rooms.list[t.name];-1!==e?ct.rooms.list[t.name].splice(e,1):console.warn("[ct.rooms] Removing a room that was not found in ct.rooms.list. This is strangeâ€¦"),t.kill=!0,ct.stage.removeChild(t);for(const e of t.children)e.kill=!0;t.onLeave(),ct.rooms.onLeave.apply(t)},switch(e){ct.rooms.templates[e]?(t=e,ct.rooms.switching=!0):console.error('[ct.rooms] The room "'+e+'" does not exist!')},switching:!1,append(t,e){if(!(t in ct.rooms.templates))return console.error(`[ct.rooms] append failed: the room ${t} does not exist!`),!1;const s=new Room(ct.rooms.templates[t]);return e&&ct.u.ext(s,e),ct.stage.addChild(s),s.onCreate(),ct.rooms.onCreate.apply(s),ct.rooms.list[t].push(s),s},prepend(t,e){if(!(t in ct.rooms.templates))return console.error(`[ct.rooms] prepend failed: the room ${t} does not exist!`),!1;const s=new Room(ct.rooms.templates[t]);return e&&ct.u.ext(s,e),ct.stage.addChildAt(s,0),s.onCreate(),ct.rooms.onCreate.apply(s),ct.rooms.list[t].push(s),s},merge(t){if(!(t in ct.rooms.templates))return console.error(`[ct.rooms] merge failed: the room ${t} does not exist!`),!1;const e={copies:[],tileLayers:[],backgrounds:[]},s=ct.rooms.templates[t],i=ct.room;for(const t of s.bgs){const s=new ct.types.Background(t.texture,null,t.depth,t.extends);i.backgrounds.push(s),i.addChild(s),e.backgrounds.push(s)}for(const t of s.tiles){const s=new Tilemap(t);i.tileLayers.push(s),i.addChild(s),e.tileLayers.push(s),s.cache()}for(const t of s.objects){const s=ct.types.make(t.type,t.x,t.y,{tx:t.tx||1,ty:t.ty||1,tr:t.tr||0},i);e.copies.push(s)}return e},forceSwitch(e){t&&(e=t),ct.room&&(ct.room.onLeave(),ct.rooms.onLeave.apply(ct.room),ct.room=void 0),ct.rooms.clear(),deadPool.length=0;var s=ct.rooms.templates[e];ct.roomWidth=s.width,ct.roomHeight=s.height,ct.camera=new Camera(ct.roomWidth/2,ct.roomHeight/2,ct.roomWidth,ct.roomHeight),ct.pixiApp.renderer.resize(s.width,s.height),ct.rooms.current=ct.room=new Room(s),ct.stage.addChild(ct.room),ct.room.onCreate(),ct.rooms.onCreate.apply(ct.room),ct.rooms.list[e].push(ct.room),ct.camera.manageStage(),ct.rooms.switching=!1,t=void 0},onCreate(){if(this===ct.room){ct.place.tileGrid={};const t=new PIXI.Graphics;t.depth=1e7,ct.room.addChild(t),ct.place.debugTraceGraphics=t}for(const t of this.tileLayers)-1!==this.children.indexOf(t)&&ct.place.enableTilemapCollisions(t)},onLeave(){if(!this.kill){for(var t of ct.tween.tweens)t.reject({info:"Room switch",code:1,from:"ct.tween"});ct.tween.tweens=[]}this===ct.room&&(ct.place.grid={})},starting:"MainMenu"}}(),ct.room=null,ct.rooms.beforeStep=function(){for(var t=0;t<ct.tween.tweens.length;){var e=ct.tween.tweens[t];if(e.obj.kill)e.reject({code:2,info:"Copy is killed"}),ct.tween.tweens.splice(t,1);else{var s=e.timer.time/e.duration;for(var i in s>1&&(s=1),e.fields){var o=e.starting[i],a=e.fields[i]-e.starting[i];e.obj[i]=e.curve(o,a,s)}1!==s?t++:(e.resolve(e.fields),ct.tween.tweens.splice(t,1))}}ct.touch.updateGestures()},ct.rooms.afterStep=function(){},ct.rooms.beforeDraw=function(){},ct.rooms.afterDraw=function(){ct.sound.follow&&!ct.sound.follow.kill?ct.sound.howler.pos(ct.sound.follow.x,ct.sound.follow.y,ct.sound.useDepth?ct.sound.follow.z:0):ct.sound.manageListenerPosition&&ct.sound.howler.pos(ct.camera.x,ct.camera.y,ct.camera.z||0);for(const t of ct.touch.events)t.xprev=t.x,t.yprev=t.y,t.xuiprev=t.x,t.yuiprev=t.y,ct.touch.clearReleased()},ct.rooms.templates.InGame={name:"InGame",width:1080,height:1920,objects:JSON.parse('[{"x":320,"y":832,"tx":0.65,"ty":0.65,"exts":{},"type":"PotatoCat"}]'),bgs:JSON.parse('[{"depth":-1000,"texture":"BG_Sky","extends":{"parallaxX":0.5,"parallaxY":0,"repeat":"repeat"}},{"depth":-100,"texture":"BG_Ground","extends":{"repeat":"repeat-x","shiftX":0,"shiftY":1736}}]'),tiles:JSON.parse('[{"depth":-10,"tiles":[],"extends":{}}]'),backgroundColor:"#000000",onStep(){if(ct.sound.spawn("HouseDeep",{loop:!0,volume:.3}),ct.types.list.PotatoCat.length&&(this.obstacleTimer-=ct.delta,this.obstacleTimer<=0)){this.obstacleTimer+=2*ct.speed;var t=ct.types.copy("Tube",ct.camera.right+250,ct.camera.bottom-130),e=ct.types.copy("Tube",ct.camera.right+250,ct.camera.top-70);"Tube_01"===t.tex?e.tex="Tube_04":"Tube_02"===t.tex?e.tex="Tube_03":"Tube_03"===t.tex?e.tex="Tube_02":"Tube_04"===t.tex&&(e.tex="Tube_01"),e.scale.y=-1,ct.random.chance(30)&&ct.types.copy("Star",ct.camera.right+250+500,ct.random.range(ct.camera.top+300,ct.camera.bottom-300))}},onDraw(){},onLeave(){},onCreate(){this.stars=0,this.mainUi=ct.rooms.append("UI_InGame",{isUi:!0}),this.obstacleTimer=5*ct.speed,ct.transition.circleIn(500,4483803)},extends:{}},ct.rooms.templates.MainMenu={name:"MainMenu",width:1080,height:1920,objects:JSON.parse('[{"x":540,"y":384,"exts":{},"type":"Logo"},{"x":540,"y":960,"exts":{},"type":"Button_Play"}]'),bgs:JSON.parse('[{"depth":-1000,"texture":"BG_Sky","extends":{"movementX":-0.5}},{"depth":-100,"texture":"BG_Ground","extends":{"repeat":"repeat-x","shiftY":1736}}]'),tiles:JSON.parse('[{"depth":-10,"tiles":[],"extends":{}}]'),backgroundColor:"#000000",onStep(){},onDraw(){},onLeave(){},onCreate(){},extends:{}},ct.rooms.templates.UI_InGame={name:"UI_InGame",width:1080,height:1920,objects:JSON.parse('[{"x":128,"y":128,"tx":0.75,"ty":0.75,"exts":{},"type":"StarCounter"},{"x":960,"y":128,"exts":{},"type":"Button_Pause"},{"x":512,"y":960,"exts":{},"type":"PressHint"}]'),bgs:JSON.parse("[]"),tiles:JSON.parse('[{"depth":-10,"tiles":[],"extends":{}}]'),backgroundColor:"#000000",onStep(){},onDraw(){},onLeave(){},onCreate(){},extends:{}},ct.rooms.templates.UI_Paused={name:"UI_Paused",width:1080,height:1920,objects:JSON.parse('[{"x":540,"y":1088,"exts":{},"type":"Button_Continue"},{"x":540,"y":576,"exts":{},"type":"Paused_Heading"}]'),bgs:JSON.parse("[]"),tiles:JSON.parse('[{"depth":-10,"tiles":[],"extends":{}}]'),backgroundColor:"#000000",onStep(){},onDraw(){},onLeave(){},onCreate(){this.alpha=0,ct.tween.add({obj:this,fields:{alpha:1},duration:500})},extends:{}},ct.rooms.templates.UI_OhNo={name:"UI_OhNo",width:1080,height:1920,objects:JSON.parse('[{"x":540,"y":384,"exts":{},"type":"OhNo_Heading"},{"x":540,"y":1344,"exts":{},"type":"Button_Play"},{"x":540,"y":832,"exts":{},"type":"EndGame_Star_Counter"}]'),bgs:JSON.parse("[]"),tiles:JSON.parse('[{"depth":-10,"tiles":[],"extends":{}}]'),backgroundColor:"#000000",onStep(){},onDraw(){},onLeave(){},onCreate(){this.alpha=0,ct.tween.add({obj:this,fields:{alpha:1},duration:500})},extends:{}},ct.rooms.templates.CTTRANSITIONEMPTYROOM={name:"CTTRANSITIONEMPTYROOM",width:1024,height:1024,objects:[],bgs:[],tiles:[],onStep(){},onDraw(){},onLeave(){},onCreate(){}},ct.styles={types:{},new:(t,e)=>(ct.styles.types[t]=e,e),get:(t,e)=>!0===e?ct.u.ext({},ct.styles.types[t]):e?ct.u.ext(ct.u.ext({},ct.styles.types[t]),e):ct.styles.types[t]},ct.styles.new("Orange",{fontFamily:"sans-serif",fontSize:80,fontStyle:"normal",fontWeight:"900",align:"center",lineJoin:"round",lineHeight:108,fill:["#E7A66F","#D28753"],fillGradientType:0,strokeThickness:10,stroke:"#914121"});class EmitterTandem extends PIXI.Container{constructor(t,e){super(),this.emitters=[],this.delayed=[];for(const s of t){const t=new PIXI.particles.Emitter(this,ct.res.getTexture(s.texture),s.settings),i=s.settings.delay+e.prewarmDelay;i>0?(t.emit=!1,this.delayed.push({value:i,emitter:t})):i<0?(t.emit=!0,t.update(-i)):t.emit=!0,t.initialDeltaPos={x:s.settings.pos.x,y:s.settings.pos.y},this.emitters.push(t),t.playOnce((()=>{this.emitters.splice(this.emitters.indexOf(t),1)}))}this.isUi=e.isUi,this.scale.x=e.scale.x,this.scale.y=e.scale.y,e.rotation?this.rotation=ct.u.radToDeg(e.rotation):e.angle&&(this.angle=e.angle),this.deltaPosition=e.position,this.depth=e.depth,this.paused=this.frozen=!1,this.isUi?ct.emitters.uiTandems.push(this):ct.emitters.tandems.push(this)}update(){if(this.stopped)for(const t of this.emitters)t.particleCount||this.emitters.splice(this.emitters.indexOf(t),1);if(this.appendant&&this.appendant._destroyed||this.kill||!this.emitters.length)return this.emit("done"),this.isUi?ct.emitters.uiTandems.splice(ct.emitters.uiTandems.indexOf(this),1):ct.emitters.tandems.splice(ct.emitters.tandems.indexOf(this),1),void this.destroy();if(this.frozen)return;const t=(this.isUi?PIXI.Ticker.shared.elapsedMS:PIXI.Ticker.shared.deltaMS)/1e3;for(const e of this.delayed)e.value-=t,e.value<=0&&(e.emitter.emit=!0,this.delayed.splice(this.delayed.indexOf(e),1));for(const e of this.emitters)this.delayed.find((t=>t.emitter===e))||e.update(t);this.follow&&this.updateFollow()}stop(){if(this.stopped)console.trace("[ct.emitters] An attempt to stop an already stopped emitter tandem. Continuingâ€¦");else{this.stopped=!0;for(const t of this.emitters)t.emit=!1;this.delayed=[]}}pause(){for(const t of this.emitters)t.oldMaxParticles=t.maxParticles,t.maxParticles=0}resume(){for(const t of this.emitters)t.maxParticles=t.oldMaxParticles||t.maxParticles}clear(){for(const t of this.emitters)t.cleanup()}updateFollow(){if(!this.follow)return;if(this.follow.kill||!this.follow.scale)return this.follow=null,void this.stop();const t=ct.u.rotate(this.deltaPosition.x*this.follow.scale.x,this.deltaPosition.y*this.follow.scale.y,-this.follow.angle);for(const e of this.emitters){e.updateOwnerPos(this.follow.x+t[0],this.follow.y+t[1]);const s=ct.u.rotate(e.initialDeltaPos.x*this.follow.scale.x,e.initialDeltaPos.y*this.follow.scale.y,-this.follow.angle);e.updateSpawnPos(s[0],s[1])}}}!function(){const t={prewarmDelay:0,scale:{x:1,y:1},tint:16777215,alpha:1,position:{x:0,y:0},isUi:!1,depth:1/0};ct.emitters={templates:{Jet:[{texture:"Circle_08",settings:{alpha:{list:[{value:0,time:0},{value:.835,time:.24000000000000002},{value:0,time:1}],isStepped:!1},scale:{list:[{value:.2,time:0},{value:.4,time:1}],isStepped:!1},color:{list:[{value:"ffffff",time:0},{value:"ffffff",time:.24000000000000002},{value:"ffffff",time:1}],isStepped:!1},blendMode:"normal",speed:{list:[{value:787.5,time:0},{value:400,time:1}],isStepped:!1},startRotation:{min:92,max:110},rotationSpeed:{min:0,max:0},rotationAcceleration:0,lifetime:{min:.5,max:.5},frequency:.035,spawnChance:1,particlesPerWave:1,angleStart:270,emitterLifetime:0,maxParticles:1e3,maxSpeed:0,pos:{x:-144,y:88},acceleration:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:17},delay:0,minimumScaleMultiplier:.16}}],Stars:[{texture:"Star",settings:{alpha:{list:[{value:0,time:0},{time:.11600000000000002,value:.6600000000000001},{value:1,time:.5},{value:0,time:1}],isStepped:!1},scale:{list:[{value:.19,time:0},{time:.21999999999999995,value:.4},{time:.448,value:.5},{time:.728,value:.3500000000000001},{value:.04999999999999999,time:1}],isStepped:!1},color:{list:[{value:"ffffff",time:0},{time:.11600000000000002,value:"FFFFFF"},{value:"ffffff",time:.5},{value:"ffffff",time:1}],isStepped:!1},blendMode:"normal",speed:{list:[{value:787.5,time:0},{value:450.00000000000006,time:1}],isStepped:!1},startRotation:{min:0,max:360},rotationSpeed:{min:-180,max:180},rotationAcceleration:0,lifetime:{min:.5,max:1},frequency:.008,spawnChance:1,particlesPerWave:1,angleStart:270,emitterLifetime:.1,maxParticles:1e3,maxSpeed:0,pos:{x:0,y:8},acceleration:{x:0,y:1376},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:65,minR:100},delay:0,minimumSpeedMultiplier:.1,noRotation:!0}}]}||{},uiTandems:[],tandems:[],fire(e,s,i,o){if(!(e in ct.emitters.templates))throw new Error(`[ct.emitters] An attempt to create a non-existent emitter ${e}.`);const a=Object.assign({},t,o),r=new EmitterTandem(ct.emitters.templates[e],a);return r.x=s,r.y=i,a.room?(a.room.addChild(r),r.isUi=a.room.isUi):(ct.room.addChild(r),r.isUi=ct.room.isUi),r},append(e,s,i){if(!(s in ct.emitters.templates))throw new Error(`[ct.emitters] An attempt to create a non-existent emitter ${s}.`);const o=Object.assign({},t,i),a=new EmitterTandem(ct.emitters.templates[s],o);return o.position&&(a.x=o.position.x,a.y=o.position.y),a.appendant=e,e.addChild(a),a},follow(e,s,i){if(!(s in ct.emitters.templates))throw new Error(`[ct.emitters] An attempt to create a non-existent emitter ${s}.`);const o=Object.assign({},t,i),a=new EmitterTandem(ct.emitters.templates[s],o);return a.follow=e,a.updateFollow(),"getRoom"in e?e.getRoom().addChild(a):ct.room.addChild(a),a}},PIXI.Ticker.shared.add((()=>{for(const t of ct.emitters.uiTandems)t.update();for(const t of ct.emitters.tandems)t.update()}))}(),function(ct){const t=new PIXI.Loader,e=document.querySelector(".ct-aLoadingScreen"),s=e.querySelector(".ct-aLoadingBar"),i=window.dragonBones?dragonBones.PixiFactory.factory:null;ct.res={soundsLoaded:0,soundsTotal:1,soundsError:0,sounds:{},registry:{BG_Ground:{atlas:"./img/t0.png",frames:0,shape:{type:"rect",top:0,bottom:191,left:0,right:1080},anchor:{x:0,y:0}},Button_Play:{frames:1,shape:{type:"circle",r:160},anchor:{x:.5,y:.5}},Jetty_Cat:{frames:1,shape:{type:"rect",top:174,bottom:175,left:462,right:463},anchor:{x:.49945945945945946,y:.498567335243553}},Button_Pause:{frames:1,shape:{type:"rect",top:104,bottom:104,left:98,right:98},anchor:{x:.5,y:.5}},PotatoCat:{frames:1,shape:{type:"strip",points:[{x:76,y:-171.5},{x:117,y:-57.5},{x:115,y:108.5},{x:76,y:172.5},{x:-1.5,y:197.5},{x:-71.5,y:183.5},{x:-113,y:153.5},{x:-138,y:88.5},{x:-155,y:86},{x:-176,y:68.5},{x:-154,y:-59},{x:-112,y:-98.5},{x:-93,y:-92.5},{x:-48.5,y:-171},{x:-20,y:-188},{x:21.5,y:-241.5},{x:41.5,y:-184.5}],closedStrip:!0},anchor:{x:.7032019704433498,y:.502079002079002}},PotatoCat_Stunned:{frames:1,shape:{type:"rect",top:248,bottom:233,left:284,right:121},anchor:{x:.7007389162561576,y:.5155925155925156}},Star:{frames:1,shape:{type:"strip",points:[{x:0,y:-92},{x:18,y:-81.25},{x:36.5,y:-42},{x:91.5,y:-31.5},{x:93.5,y:-5.5},{x:60.25,y:27.5},{x:68.5,y:76.5},{x:49,y:95.25},{x:.75,y:71.25},{x:-47.277447246598406,y:95.69231599041314},{x:-66.94890225084308,y:77.12227673315851},{x:-59.149470707146506,y:28.04854274444321},{x:-92.70127668156597,y:-4.644557687527254},{x:-90.94025346021978,y:-30.661836507839723},{x:-36.03905088434353,y:-41.666742492108696},{x:-17.900467381770937,y:-81.08506676547424}],closedStrip:!0},anchor:{x:.5,y:.4972677595628415}},BG_Sky:{atlas:"./img/t1.png",frames:0,shape:{type:"rect",top:0,bottom:1920,left:0,right:1080},anchor:{x:0,y:0}},Pause:{frames:1,shape:{type:"rect",top:113,bottom:113,left:375,right:375},anchor:{x:.5,y:.5}},Circle_08:{frames:1,shape:{type:"rect",top:0,bottom:512,left:0,right:512},anchor:{x:0,y:0}},Tube_01:{frames:1,shape:{type:"strip",points:[{x:95,y:-182.5},{x:81,y:-175},{x:79,y:2},{x:-75,y:2},{x:-75.25,y:-174.25},{x:-90.5,y:-180.25},{x:-90.5,y:-270},{x:94.25,y:-270.75}],closedStrip:!0},anchor:{x:.4022222222222222,y:.972318339100346}},Tube_03:{frames:1,shape:{type:"strip",points:[{x:96,y:-763.25},{x:96,y:-674.5},{x:81,y:-667.5},{x:78,y:-2},{x:-77,y:1},{x:-75,y:-668},{x:-89.75,y:-674},{x:-90,y:-763.5}],closedStrip:!0},anchor:{x:.4,y:.9923076923076923}},Tube_04:{frames:1,shape:{type:"strip",points:[{x:92.75,y:-1049.5},{x:94,y:-957},{x:78,y:-952.75},{x:78.75,y:-1.25},{x:-76.75,y:.25},{x:-76.25,y:-953},{x:-91.75,y:-958.25},{x:-91.25,y:-1048.75}],closedStrip:!0},anchor:{x:.4088888888888889,y:.9927366447985004}},Tube_02:{frames:1,shape:{type:"strip",points:[{x:87.5,y:-397},{x:70.5,y:-393},{x:72,y:-3},{x:-85,y:-4},{x:-84.5,y:-392},{x:-99,y:-399},{x:-98,y:-488.5},{x:85.5,y:-490}],closedStrip:!0},anchor:{x:.44,y:.9861386138613861}},OhNo:{frames:1,shape:{type:"rect",top:175,bottom:176,left:353,right:354},anchor:{x:.49929278642149927,y:.4985754985754986}},PressHint:{frames:1,shape:{type:"rect",top:134,bottom:134,left:128,right:128},anchor:{x:.5,y:.5}}},atlases:["./img/a0.json"],skelRegistry:{},fetchImage(e,s){t.add(e,e),t.load(((t,e)=>{s(e)})),t.onError(((t,s)=>{t.add(e,"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQIW2NkAAIAAAoAAggA9GkAAAAASUVORK5CYII="),console.error("[ct.res] An image from "+s+" wasn't loaded :( Maybe refreshing the page will solve this problemâ€¦"),ct.res.texturesError++}))},parseImages(){PIXI.Loader.shared.add("./img/a0.json").add("./img/t0.png").add("./img/t1.png"),PIXI.Loader.shared,PIXI.Loader.shared.load()},getTexture(t,e){if(null===e&&(e=void 0),-1===t)return void 0!==e?PIXI.Texture.EMPTY:[PIXI.Texture.EMPTY];const s=ct.res.registry[t];return void 0!==e?s.textures[e]:s.textures},makeSkeleton(t,e){const s=ct.res.skelRegistry[t],o=i.buildArmatureDisplay("Armature",s.data.name,e);return o.ctName=t,o.on(dragonBones.EventObject.SOUND_EVENT,(function(t){ct.sound.exists(t.name)?ct.sound.spawn(t.name):console.warn(`Skeleton ${o.ctName} tries to play a non-existing sound ${t.name} at animation ${o.animation.lastAnimationName}`)})),o}},PIXI.Loader.shared.onLoad.add((t=>{e.setAttribute("data-progress",t.progress),s.style.width=t.progress+"%"})),PIXI.Loader.shared.onComplete.add((()=>{for(const t in ct.res.registry){const e=ct.res.registry[t];if(e.textures=[],e.frames)for(let s=0;s<e.frames;s++){const i=`${t}@frame${s}`,o=PIXI.Loader.shared.resources[ct.res.atlases.find((t=>i in PIXI.Loader.shared.resources[t].textures))].textures[i];o.defaultAnchor=new PIXI.Point(e.anchor.x,e.anchor.y),e.textures.push(o)}else{const t=PIXI.Loader.shared.resources[e.atlas].texture;t.defaultAnchor=new PIXI.Point(e.anchor.x,e.anchor.y),e.textures.push(t)}}for(const t in ct.res.skelRegistry)ct.res.skelRegistry[t].data=PIXI.Loader.shared.resources[ct.res.skelRegistry[t].origname+"_ske.json"].data;e.classList.add("hidden"),setTimeout((()=>{ct.touch.setupListeners(),ct.touch.setupMouseListeners(),Object.defineProperty(ct.types.Copy.prototype,"ctype",{set:function(t){this.$ctype=t},get:function(){return this.$ctype}}),Object.defineProperty(ct.types.Copy.prototype,"moveContinuous",{value:function(t,e){return this.gravity&&(this.hspeed+=this.gravity*ct.delta*Math.cos(this.gravityDir*Math.PI/-180),this.vspeed+=this.gravity*ct.delta*Math.sin(this.gravityDir*Math.PI/-180)),ct.place.moveAlong(this,this.direction,this.speed*ct.delta,t,e)}}),Object.defineProperty(ct.types.Copy.prototype,"moveContinuousByAxes",{value:function(t,e){return this.gravity&&(this.hspeed+=this.gravity*ct.delta*Math.cos(this.gravityDir*Math.PI/-180),this.vspeed+=this.gravity*ct.delta*Math.sin(this.gravityDir*Math.PI/-180)),ct.place.moveByAxes(this,this.hspeed*ct.delta,this.vspeed*ct.delta,t,e)}}),Object.defineProperty(ct.types.Tilemap.prototype,"enableCollisions",{value:function(t){ct.place.enableTilemapCollisions(this,t)}}),PIXI.Ticker.shared.add(ct.loop),ct.rooms.forceSwitch(ct.rooms.starting)}),0)})),ct.res.parseImages()}(ct);const Copy=function(){const t=Symbol("texture");let e=0;class s extends PIXI.AnimatedSprite{constructor(s,i,o,a,r){var n;if(r=r||ct.room,s){if(!(s in ct.types.templates))throw new Error(`[ct.types] An attempt to create a copy of a non-existent type \`${s}\` detected. A typo?`);if((n=ct.types.templates[s]).texture&&"-1"!==n.texture){const e=ct.res.getTexture(n.texture);super(e),this[t]=n.texture,this.anchor.x=e[0].defaultAnchor.x,this.anchor.y=e[0].defaultAnchor.y}else super([PIXI.Texture.EMPTY]);this.type=s,this.parent=r,n.extends&&ct.u.ext(this,n.extends)}else super([PIXI.Texture.EMPTY]);return this[copyTypeSymbol]=!0,a&&(ct.u.ext(this,a),a.tx&&(this.scale.x=a.tx,this.scale.y=a.ty),a.tr&&(this.rotation=a.tr)),this.position.set(i||0,o||0),this.xprev=this.xstart=this.x,this.yprev=this.ystart=this.y,this.speed=this.direction=this.gravity=this.hspeed=this.vspeed=0,this.gravityDir=270,this.depth=0,this.uid=++e,s&&(ct.u.ext(this,{type:s,depth:n.depth,onStep:n.onStep,onDraw:n.onDraw,onCreate:n.onCreate,onDestroy:n.onDestroy,shape:n.texture?ct.res.registry[n.texture].shape:{}}),a&&void 0!==a.depth&&(this.depth=a.depth),ct.types.list[s]?ct.types.list[s].push(this):ct.types.list[s]=[this],this.onBeforeCreateModifier(),ct.types.templates[s].onCreate.apply(this)),this}set tex(e){return this.textures=ct.res.getTexture(e),this[t]=e,this.shape=-1!==e?ct.res.registry[e].shape:{},this.anchor.x=this.textures[0].defaultAnchor.x,this.anchor.y=this.textures[0].defaultAnchor.y,e}get tex(){return this[t]}get speed(){return Math.hypot(this.hspeed,this.vspeed)}set speed(t){if(0!==this.speed){var e=t/this.speed;this.hspeed*=e,this.vspeed*=e}else this.hspeed=t}get direction(){return(-180*Math.atan2(this.vspeed,this.hspeed)/Math.PI+360)%360}set direction(t){var e=this.speed;return this.hspeed=e*Math.cos(t*Math.PI/-180),this.vspeed=e*Math.sin(t*Math.PI/-180),t}get rotation(){return this.transform.rotation/Math.PI*-180}set rotation(t){return this.transform.rotation=t*Math.PI/-180,t}move(){this.gravity&&(this.hspeed+=this.gravity*ct.delta*Math.cos(this.gravityDir*Math.PI/-180),this.vspeed+=this.gravity*ct.delta*Math.sin(this.gravityDir*Math.PI/-180)),this.x+=this.hspeed*ct.delta,this.y+=this.vspeed*ct.delta}addSpeed(t,e){this.hspeed+=t*Math.cos(e*Math.PI/-180),this.vspeed+=t*Math.sin(e*Math.PI/-180)}getRoom(){let t=this.parent;for(;!(t instanceof Room);)t=t.parent;return t}onBeforeCreateModifier(){}}return s}();!function(ct){const t=function(){this.$chashes=ct.place.getHashes(this);for(const t of this.$chashes)t in ct.place.grid?ct.place.grid[t].push(this):ct.place.grid[t]=[this]};ct.types={Copy:Copy,list:{BACKGROUND:[],TILEMAP:[]},templates:{},make(e,s=0,i=0,o,a){o instanceof PIXI.Container&&(a=o,o=void 0);const r=new Copy(e,s,i,o);return a?a.addChild(r):ct.room.addChild(r),ct.stack.push(r),t.apply(r),r},move(t){t.move()},addSpeed(t,e,s){t.addSpeed(e,s)},each(t){for(const e of ct.stack)e instanceof Copy&&t.apply(e,this)},with(t,e){e.apply(t,this)},exists:t=>t instanceof Copy?!t.kill:t instanceof PIXI.DisplayObject?Boolean(t.position):Boolean(t),isCopy:t=>t instanceof Copy},ct.types.copy=ct.types.make,ct.types.addSpd=ct.types.addSpeed,ct.types.templates.Logo={depth:0,texture:"Jetty_Cat",onStep:function(){},onDraw:function(){},onDestroy:function(){},onCreate:function(){},extends:{}},ct.types.list.Logo=[],ct.types.templates.Button_Play={depth:0,texture:"Button_Play",onStep:function(){ct.touch.collideUi(this)&&(this.pressed||(this.pressed=!0,ct.transition.circleOut(1e3,4483803).then((()=>{ct.rooms.switch("InGame")}))))},onDraw:function(){},onDestroy:function(){},onCreate:function(){},extends:{}},ct.types.list.Button_Play=[],ct.types.templates.PotatoCat={depth:0,texture:"PotatoCat",onStep:function(){if(this.gameover)return this.gravity=this.gravityAcceleration,void this.move();ct.actions.Poof.down&&(this.gravity=this.gravityAcceleration,this.addSpeed(ct.delta*this.gravityAcceleration*2,90),this.jet.resume()),ct.actions.Poof.released&&this.jet.pause(),!this.gameover&&(ct.place.occupied(this,"Obstacle")||this.y>ct.camera.bottom-325||this.y<ct.camera.top)&&(this.tex="PotatoCat_Stunned",this.gameover=!0,this.speed=25,this.direction=135,ct.camera.follow=!1,ct.rooms.remove(ct.room.mainUi),ct.u.wait(1e3).then((()=>{ct.rooms.append("UI_OhNo",{isUi:!0})}))),this.move()},onDraw:function(){this.rotation=.3*this.vspeed},onDestroy:function(){},onCreate:function(){this.speed=10,this.direction=0,this.gravityAcceleration=2,ct.camera.follow=this,ct.camera.followY=!1,ct.camera.shiftX=250,this.jet=ct.emitters.follow(this,"Jet")},extends:{}},ct.types.list.PotatoCat=[],ct.types.templates.Tube={depth:0,texture:"Tube_02",onStep:function(){this.move()},onDraw:function(){},onDestroy:function(){},onCreate:function(){this.tex=ct.random.dice("Tube_01","Tube_02","Tube_03","Tube_04")},extends:{ctype:"Obstacle"}},ct.types.list.Tube=[],ct.types.templates.Star={depth:0,texture:"Star",onStep:function(){ct.place.meet(this,"PotatoCat")&&(this.kill=!0,ct.room.stars++)},onDraw:function(){this.wiggleTime+=.2*ct.delta,this.rotation=5*Math.sin(this.wiggleTime)},onDestroy:function(){ct.emitters.fire("Stars",this.x,this.y)},onCreate:function(){this.wiggleTime=0},extends:{ctype:"Collectible"}},ct.types.list.Star=[],ct.types.templates.StarCounter={depth:0,texture:"Star",onStep:function(){this.move()},onDraw:function(){this.label.text=ct.room.stars},onDestroy:function(){},onCreate:function(){this.label=new PIXI.Text("0",ct.styles.get("Orange")),this.label.x=130,this.label.y=-60,this.label.scale.x=this.label.scale.y=1/.75,this.addChild(this.label)},extends:{}},ct.types.list.StarCounter=[],ct.types.templates.Button_Pause={depth:0,texture:"Button_Pause",onStep:function(){ct.touch.collideUi(this)&&0===ct.rooms.list.UI_Paused.length&&(ct.rooms.append("UI_Paused",{isUi:!0}),ct.pixiApp.ticker.speed=0)},onDraw:function(){},onDestroy:function(){},onCreate:function(){},extends:{}},ct.types.list.Button_Pause=[],ct.types.templates.Paused_Heading={depth:0,texture:"Pause",onStep:function(){},onDraw:function(){},onDestroy:function(){},onCreate:function(){},extends:{}},ct.types.list.Paused_Heading=[],ct.types.templates.Button_Continue={depth:0,texture:"Button_Play",onStep:function(){ct.touch.collideUi(this)&&(this.pressed||(this.pressed=!0,ct.tween.add({obj:this.getRoom(),fields:{alpha:0},duration:1e3}).then((()=>{ct.tween.add({obj:ct.pixiApp.ticker,fields:{speed:1},duration:1e3}),ct.rooms.remove(this.getRoom())}))))},onDraw:function(){},onDestroy:function(){},onCreate:function(){},extends:{}},ct.types.list.Button_Continue=[],ct.types.templates.OhNo_Heading={depth:0,texture:"OhNo",onStep:function(){},onDraw:function(){},onDestroy:function(){},onCreate:function(){},extends:{}},ct.types.list.OhNo_Heading=[],ct.types.templates.PressHint={depth:50,texture:"PressHint",onStep:function(){this.pulsePhase+=.2*ct.delta,this.scale.x=this.scale.y=1+.1*Math.sin(this.pulsePhase),ct.actions.Poof.pressed&&(this.kill=!0)},onDraw:function(){},onDestroy:function(){},onCreate:function(){this.pulsePhase=0},extends:{}},ct.types.list.PressHint=[],ct.types.templates.EndGame_Star_Counter={depth:0,onStep:function(){this.move()},onDraw:function(){},onDestroy:function(){},onCreate:function(){"JettyCat_HighScore"in localStorage?localStorage.JettyCat_HighScore<ct.room.stars&&(localStorage.JettyCat_HighScore=ct.room.stars):localStorage.JettyCat_HighScore=ct.room.stars;var t=`Your score: ${ct.room.stars}\nHighscore: ${localStorage.JettyCat_HighScore}`;this.label=new PIXI.Text(t,ct.styles.get("Orange")),this.label.anchor.x=this.label.anchor.y=.5,this.addChild(this.label)},extends:{}},ct.types.list.EndGame_Star_Counter=[],function(){const t=()=>{};ct.types.templates.CTTRANSITION_FADE={onStep(){},onDraw(){},onDestroy(){ct.rooms.remove(this.room)},onCreate(){this.tex=-1,this.overlay=new PIXI.Graphics,this.overlay.beginFill(this.color),this.overlay.drawRect(0,0,ct.camera.width+1,ct.camera.height+1),this.overlay.endFill(),this.overlay.alpha=this.in?1:0,this.addChild(this.overlay),this.promise=ct.tween.add({obj:this.overlay,fields:{alpha:this.in?0:1},duration:this.duration,silent:!0}).then((()=>{this.kill=!0}))}},ct.types.templates.CTTRANSITION_SCALE={onStep(){},onDraw(){},onDestroy(){ct.rooms.remove(this.room)},onCreate(){this.tex=-1,this.overlay=new PIXI.Graphics,this.overlay.beginFill(this.color),this.overlay.drawRect(0,0,ct.camera.width+1,ct.camera.height+1),this.overlay.endFill(),this.overlay.alpha=this.in?1:0,this.addChild(this.overlay);var e=ct.camera.scale.x,s=ct.camera.scale.y,i=this.in?e:e*this.scaling,o=this.in?s:s*this.scaling,a=this.in?e*this.scaling:e,r=this.in?s*this.scaling:s;ct.camera.scale.x=a,ct.camera.scale.y=r,this.promise=ct.tween.add({obj:ct.camera.scale,fields:{x:i,y:o},duration:this.duration,silent:!0}).then((()=>{ct.camera.scale.x=e,ct.camera.scale.y=s,this.kill=!0})),ct.tween.add({obj:this.overlay,fields:{alpha:this.in?0:1},duration:this.duration,silent:!0}).catch(t)}},ct.types.templates.CTTRANSITION_SLIDE={onStep(){},onDraw(){},onDestroy(){ct.rooms.remove(this.room)},onCreate(){this.tex=-1,this.overlay=new PIXI.Graphics,this.overlay.beginFill(this.color),this.overlay.drawRect(0,0,ct.camera.width+1,ct.camera.height+1),this.overlay.endFill(),"left"===this.endAt||"right"===this.endAt?(this.scale.x=this.in?1:0,this.promise=ct.tween.add({obj:this.scale,fields:{x:this.in?0:1},duration:this.duration,curve:ct.tween.easeOutQuart,silent:!0}).then((()=>{this.kill=!0}))):(this.scale.y=this.in?1:0,this.promise=ct.tween.add({obj:this.scale,fields:{y:this.in?0:1},duration:this.duration,curve:ct.tween.easeOutQuart,silent:!0}).then((()=>{this.kill=!0}))),this.in||"left"!==this.endAt||(this.x=ct.camera.width+1,ct.tween.add({obj:this,fields:{x:0},duration:this.duration,curve:ct.tween.easeOutQuart,silent:!0}).catch(t)),this.in||"top"!==this.endAt||(this.y=ct.camera.height+1,ct.tween.add({obj:this,fields:{y:0},duration:this.duration,curve:ct.tween.easeOutQuart,silent:!0}).catch(t)),this.in&&"right"===this.endAt&&ct.tween.add({obj:this,fields:{x:ct.camera.width+1},duration:this.duration,curve:ct.tween.easeOutQuart,silent:!0}).catch(t),this.in&&"bottom"===this.endAt&&ct.tween.add({obj:this,fields:{y:ct.camera.height+1},duration:this.duration,curve:ct.tween.easeOutQuart,silent:!0}).catch(t),this.addChild(this.overlay)}},ct.types.templates.CTTRANSITION_CIRCLE={onStep(){},onDraw(){},onDestroy(){ct.rooms.remove(this.room)},onCreate(){this.tex=-1,this.x=(ct.camera.width+1)/2,this.y=(ct.camera.height+1)/2,this.overlay=new PIXI.Graphics,this.overlay.beginFill(this.color),this.overlay.drawCircle(0,0,ct.u.pdc(0,0,(ct.camera.width+1)/2,(ct.camera.height+1)/2)),this.overlay.endFill(),this.addChild(this.overlay),this.scale.x=this.scale.y=this.in?0:1,this.promise=ct.tween.add({obj:this.scale,fields:{x:this.in?1:0,y:this.in?1:0},duration:this.duration,silent:!0}).then((()=>{this.kill=!0}))}}}(),ct.types.beforeStep=function(){},ct.types.afterStep=function(){},ct.types.beforeDraw=function(){!1},ct.types.afterDraw=function(){if(this.transform&&this.transform._localID!==this.transform._currentLocalID||this.x!==this.xprev||this.y!==this.yprev){delete this._shape;const t=this.$chashes||[];this.$chashes=ct.place.getHashes(this);for(const e of t)-1===this.$chashes.indexOf(e)&&ct.place.grid[e].splice(ct.place.grid[e].indexOf(this),1);for(const e of this.$chashes)-1===t.indexOf(e)&&(e in ct.place.grid?ct.place.grid[e].push(this):ct.place.grid[e]=[this])}},ct.types.onDestroy=function(){if(this.$chashes)for(const t of this.$chashes)ct.place.grid[t].splice(ct.place.grid[t].indexOf(this),1)}}(ct);class Background extends PIXI.TilingSprite{constructor(t,e=0,s=0,i={}){var o=ct.camera.width,a=ct.camera.height;const r=ct.res.getTexture(t,e||0);"no-repeat"!==i.repeat&&"repeat-x"!==i.repeat||(a=r.height*(i.scaleY||1)),"no-repeat"!==i.repeat&&"repeat-y"!==i.repeat||(o=r.width*(i.scaleX||1)),super(r,o,a),ct.backgrounds.list[t]||(ct.backgrounds.list[t]=[]),ct.backgrounds.list[t].push(this),ct.types.list.BACKGROUND.push(this),ct.stack.push(this),this.anchor.x=this.anchor.y=0,this.depth=s,this.shiftX=this.shiftY=this.movementX=this.movementY=0,this.parallaxX=this.parallaxY=1,i&&ct.u.extend(this,i),this.scaleX&&(this.tileScale.x=Number(this.scaleX)),this.scaleY&&(this.tileScale.y=Number(this.scaleY)),this.reposition()}onStep(){this.shiftX+=ct.delta*this.movementX,this.shiftY+=ct.delta*this.movementY}reposition(){const t=this.isUi?{x:0,y:0,width:ct.camera.width,height:ct.camera.height}:ct.camera.getBoundingBox();"repeat-x"!==this.repeat&&"no-repeat"!==this.repeat?(this.y=t.y,this.tilePosition.y=-this.y*this.parallaxY+this.shiftY,this.height=t.height+1):this.y=this.shiftY+t.y*(this.parallaxY-1),"repeat-y"!==this.repeat&&"no-repeat"!==this.repeat?(this.x=t.x,this.tilePosition.x=-this.x*this.parallaxX+this.shiftX,this.width=t.width+1):this.x=this.shiftX+t.x*(this.parallaxX-1)}onDraw(){this.reposition()}static onCreate(){}static onDestroy(){}get isUi(){return!!this.parent&&Boolean(this.parent.isUi)}}ct.backgrounds={Background:Background,list:{},add(t,e=0,s=0,i=ct.room){if(!t)throw new Error("[ct.backgrounds] The texName argument is required.");const o=new Background(t,e,s);return i.addChild(o),o}},ct.types.Background=Background;class Tilemap extends PIXI.Container{constructor(t){if(super(),this.pixiTiles=[],t){this.depth=t.depth,this.tiles=t.tiles.map((t=>({...t}))),t.extends&&Object.assign(this,t.extends);for(let e=0,s=t.tiles.length;e<s;e++){const s=ct.res.getTexture(t.tiles[e].texture),i=new PIXI.Sprite(s[t.tiles[e].frame]);i.anchor.x=i.anchor.y=0,this.addChild(i),this.pixiTiles.push(i),i.x=t.tiles[e].x,i.y=t.tiles[e].y}}else this.tiles=[];ct.types.list.TILEMAP.push(this)}addTile(t,e,s,i=0){if(this.cached)throw new Error("[ct.tiles] Adding tiles to cached tilemaps is forbidden. Create a new tilemap, or add tiles before caching the tilemap.");const o=ct.res.getTexture(t,i),a=new PIXI.Sprite(o);return a.x=e,a.y=s,this.tiles.push({texture:t,frame:i,x:e,y:s,width:a.width,height:a.height}),this.addChild(a),this.pixiTiles.push(a),a}cache(t=1024){if(this.cached)throw new Error("[ct.tiles] Attempt to cache an already cached tilemap.");const e=this.getLocalBounds(),s=Math.ceil(e.width/t),i=Math.ceil(e.height/t);this.cells=[];for(let t=0;t<i;t++)for(let t=0;t<s;t++){const t=new PIXI.Container;this.cells.push(t)}for(let i=0,o=this.tiles.length;i<o;i++){const i=this.children[0],o=Math.floor((i.x-e.x)/t),a=Math.floor((i.y-e.y)/t);this.cells[a*s+o].addChild(i)}this.removeChildren();for(let t=0,e=this.cells.length;t<e;t++)0!==this.cells[t].children.length?(this.addChild(this.cells[t]),this.cells[t].cacheAsBitmap=!0):(this.cells.splice(t,1),t--,e--);this.cached=!0}cacheDiamond(t=1024){if(this.cached)throw new Error("[ct.tiles] Attempt to cache an already cached tilemap.");this.cells=[],this.diamondCellMap={};for(let e=0,s=this.tiles.length;e<s;e++){const e=this.children[0],[s,i]=ct.u.rotate(e.x,2*e.y,-45),o=Math.floor(s/t),a=Math.floor(i/t),r=`${o}:${a}`;if(!(r in this.diamondCellMap)){const t=new PIXI.Container;t.chunkX=o,t.chunkY=a,this.diamondCellMap[r]=t,this.cells.push(t)}this.diamondCellMap[r].addChild(e)}this.removeChildren(),this.cells.sort(((t,e)=>{const s=Math.max(t.chunkY,t.chunkX),i=Math.max(e.chunkY,e.chunkX);return s===i?e.chunkX-t.chunkX:s-i}));for(let t=0,e=this.cells.length;t<e;t++)this.addChild(this.cells[t]),this.cells[t].cacheAsBitmap=!0;this.cached=!0}}ct.types.Tilemap=Tilemap,ct.tilemaps={create(t=0){const e=new Tilemap;return e.depth=t,ct.room.addChild(e),e},addTile:(t,e,s,i,o=0)=>t.addTile(e,s,i,o),cache(t,e){t.cache(e)},cacheDiamond(t,e){t.cacheDiamond(e)}};class Camera extends PIXI.DisplayObject{constructor(t,e,s,i){super(),this.follow=this.rotate=!1,this.followX=this.followY=!0,this.targetX=this.x=t,this.targetY=this.y=e,this.z=500,this.width=s||1920,this.height=i||1080,this.shiftX=this.shiftY=this.interpolatedShiftX=this.interpolatedShiftY=0,this.borderX=this.borderY=null,this.drift=0,this.shake=0,this.shakeDecay=5,this.shakeX=this.shakeY=1,this.shakeFrequency=50,this.shakePhase=this.shakePhaseX=this.shakePhaseY=0,this.shakeMax=10,this.getBounds=this.getBoundingBox}get scale(){return this.transform.scale}set scale(t){"number"==typeof t&&(t={x:t,y:t}),this.transform.scale.copyFrom(t)}moveTo(t,e){this.targetX=t,this.targetY=e}teleportTo(t,e){this.targetX=this.x=t,this.targetY=this.y=e,this.shakePhase=this.shakePhaseX=this.shakePhaseY=0,this.interpolatedShiftX=this.shiftX,this.interpolatedShiftY=this.shiftY}update(t){this.follow&&this.follow.kill&&(this.follow=!1);const e=t/(PIXI.Ticker.shared.maxFPS||60);this.shake-=e*this.shakeDecay,this.shake=Math.max(0,this.shake),this.shakeMax&&(this.shake=Math.min(this.shake,this.shakeMax));const s=e*this.shakeFrequency;this.shakePhase+=s,this.shakePhaseX+=s*(1+.25*Math.sin(.1489*this.shakePhase)),this.shakePhaseY+=s*(1+.25*Math.sin(.1734*this.shakePhase));const i=this.drift?Math.min(1,(1-this.drift)*t):1;if(this.follow&&"x"in this.follow&&"y"in this.follow){const t=null===this.borderX?this.width/2:Math.min(this.borderX,this.width/2),e=null===this.borderY?this.height/2:Math.min(this.borderY,this.height/2),s=this.uiToGameCoord(t,e),i=this.uiToGameCoord(this.width-t,this.height-e);this.followX&&(this.follow.x<s[0]-this.interpolatedShiftX?this.targetX=this.follow.x-t+this.width/2:this.follow.x>i[0]-this.interpolatedShiftX&&(this.targetX=this.follow.x+t-this.width/2)),this.followY&&(this.follow.y<s[1]-this.interpolatedShiftY?this.targetY=this.follow.y-e+this.height/2:this.follow.y>i[1]-this.interpolatedShiftY&&(this.targetY=this.follow.y+e-this.height/2))}this.x=this.targetX*i+this.x*(1-i),this.y=this.targetY*i+this.y*(1-i),this.interpolatedShiftX=this.shiftX*i+this.interpolatedShiftX*(1-i),this.interpolatedShiftY=this.shiftY*i+this.interpolatedShiftY*(1-i),this.x=this.x||0,this.y=this.y||0}get computedX(){const t=(Math.sin(this.shakePhaseX)+.25*Math.sin(3.1846*this.shakePhaseX))/1.25;return this.x+t*this.shake*Math.max(this.width,this.height)/100*this.shakeX+this.interpolatedShiftX}get computedY(){const t=(Math.sin(this.shakePhaseY)+.25*Math.sin(2.8948*this.shakePhaseY))/1.25;return this.y+t*this.shake*Math.max(this.width,this.height)/100*this.shakeY+this.interpolatedShiftY}get left(){return this.computedX-this.width/2*this.scale.x}get top(){return this.computedY-this.height/2*this.scale.y}get right(){return this.computedX+this.width/2*this.scale.x}get bottom(){return this.computedY+this.height/2*this.scale.y}uiToGameCoord(t,e){const s=(t-this.width/2)*this.scale.x,i=(e-this.height/2)*this.scale.y,o=ct.u.rotate(s,i,this.rotation);return[o[0]+this.computedX,o[1]+this.computedY]}gameToUiCoord(t,e){const s=t-this.computedX,i=e-this.computedY,o=ct.u.rotate(s,i,-this.rotation);return[o[0]/this.scale.x+this.width/2,o[1]/this.scale.y+this.height/2]}getTopLeftCorner(){return this.uiToGameCoord(0,0)}getTopRightCorner(){return this.uiToGameCoord(this.width,0)}getBottomLeftCorner(){return this.uiToGameCoord(0,this.height)}getBottomRightCorner(){return this.uiToGameCoord(this.width,this.height)}getBoundingBox(){const t=new PIXI.Bounds,e=this.getTopLeftCorner(),s=this.getTopRightCorner(),i=this.getBottomLeftCorner(),o=this.getBottomRightCorner();return t.addPoint(new PIXI.Point(e[0],e[1])),t.addPoint(new PIXI.Point(s[0],s[1])),t.addPoint(new PIXI.Point(i[0],i[1])),t.addPoint(new PIXI.Point(o[0],o[1])),t.getRectangle()}get rotation(){return this.transform.rotation/Math.PI*-180}set rotation(t){return this.transform.rotation=t*Math.PI/-180,t}contains(t){const e=t.getBounds(!0);return e.right>0&&e.left<this.width*this.scale.x&&e.bottom>0&&e.top<this.width*this.scale.y}realign(t){if(!t.isUi)throw new Error("[ct.camera] An attempt to realing a room that is not in UI space. The room in question is",t);const e=ct.rooms.templates[t.name].width||1,s=ct.rooms.templates[t.name].height||1;for(const i of t.children)"xstart"in i&&!i.skipRealign&&(i.x=i.xstart/e*this.width,i.y=i.ystart/s*this.height)}manageStage(){const t=this.computedX,e=this.computedY,s=1/(isNaN(this.scale.x)?1:this.scale.x),i=1/(isNaN(this.scale.y)?1:this.scale.y);for(const o of ct.stage.children)!o.isUi&&o.pivot&&(o.x=-this.width/2,o.y=-this.height/2,o.pivot.x=t,o.pivot.y=e,o.scale.x=s,o.scale.y=i,o.angle=-this.angle)}}if(ct.sound||(ct.sound={detect(t){var e=document.createElement("audio");return Boolean(e.canPlayType&&e.canPlayType(t).replace(/no/,""))},init(t,e,s){var i="";ct.sound.mp3&&e.mp3?i=e.mp3:ct.sound.ogg&&e.ogg?i=e.ogg:ct.sound.wav&&e.wav&&(i=e.wav),s=s||{};var o={src:i,direct:document.createElement("audio"),pool:[],poolSize:s.poolSize||5};return""!==i?(ct.res.soundsLoaded++,o.direct.preload=s.music?"metadata":"auto",o.direct.onerror=o.direct.onabort=function(){console.error("[ct.sound] Oh no! We couldn't load "+i+"!"),o.buggy=!0,ct.res.soundsError++,ct.res.soundsLoaded--},o.direct.src=i):(ct.res.soundsError++,o.buggy=!0,console.error("[ct.sound] We couldn't load sound named \""+t+"\" because the browser doesn't support any of proposed formats.")),ct.res.sounds[t]=o,o},spawn(t,e,s){"function"==typeof(e=e||{})&&(s=e);var i=ct.res.sounds[t];if(i.pool.length<i.poolSize){var o=document.createElement("audio");return o.src=i.src,e&&ct.u.ext(o,e),i.pool.push(o),o.addEventListener("ended",(function(t){i.pool.splice(i.pool.indexOf(o),1),s&&s(!0,t)})),o.play(),o}return s&&s(!1),!1},exists:t=>t in ct.res.sounds},ct.sound.wav=ct.sound.detect('audio/wav; codecs="1"'),ct.sound.mp3=ct.sound.detect("audio/mpeg;"),ct.sound.ogg=ct.sound.detect("audio/ogg;")),ct.sound.init("HouseDeep",{wav:!1,mp3:!1,ogg:"./snd/fe1ae492-860e-4236-a00e-98f5f632e0d0.ogg"},{poolSize:1,music:!0}),function(){const t=Symbol("time"),e=Symbol("roomUid"),s=Symbol("timeLeftOriginal"),i=Symbol("promiseResolve"),o=Symbol("promiseReject");class a{constructor(a,r=!1,n=!1){this[e]=ct.room.uid||null,this.name=r&&r.toString(),this.isUi=n,this[t]=0,this[s]=a,this.timeLeft=this[s],this.promise=new Promise(((t,e)=>{this[i]=t,this[o]=e})),this.rejected=!1,this.done=!1,this.settled=!1,ct.timer.timers.add(this)}then(...t){return this.promise.then(...t)}catch(t){return this.promise.catch(t)}get time(){return 1e3*this[t]/ct.speed}set time(e){this[t]=e/1e3*ct.speed}update(){!0!==this.rejected&&!0!==this.done?(this[t]+=this.isUi?ct.deltaUi:ct.delta,ct.room.uid!==this[e]&&null!==this[e]&&this.reject({info:"Room switch",from:"ct.timer"}),0!==this.timeLeft&&(this.timeLeft=this[s]-this.time,this.timeLeft<=0&&this.resolve())):this.remove()}resolve(){this.settled||(this.done=!0,this.settled=!0,this[i](),this.remove())}reject(t){this.settled||(this.rejected=!0,this.settled=!0,this[o](t),this.remove())}remove(){ct.timer.timers.delete(this)}}window.CtTimer=a,ct.timer={timers:new Set,counter:0,add:(t,e=!1)=>new a(t,e,!1),addUi:(t,e=!1)=>new a(t,e,!0),updateTimers(){for(const t of this.timers)t.update()}}}(),document.fonts)for(const t of document.fonts)t.load();
})();